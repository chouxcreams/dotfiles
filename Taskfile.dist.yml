version: "3"
tasks:
  pull:
    cmds:
      - git pull origin main
      - task: update
  update:
    cmds:
      - task: symlink
      - task: brew
      - task: completions
      - task: sheldon
  symlink:
    sources:
      - ./scripts/symlink.sh
    cmds:
      - ./scripts/symlink.sh
  brew:
    cmds:
      - brew bundle --file=$XDG_CONFIG_HOME/homebrew/Brewfile
    sources:
      - $XDG_CONFIG_HOME/homebrew/Brewfile
  completions:
    cmds:
      - ./scripts/completion.zsh
    sources:
      - ./scripts/completion.zsh
    generates:
      - "$XDG_DATA_HOME/zsh/completions/*"
  sheldon:
    cmds:
      - sheldon lock --reinstall
      - sheldon source > ~/.cache/sheldon/source
    sources:
      - ./config/zsh/plugins/defer/*
      - ./config/zsh/plugins/sync/*

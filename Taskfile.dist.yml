version: "3"
tasks:
  init:
    sources:
      - ./scripts/init.sh
    cmds:
      - ./scripts/init.sh
  pull:
    cmds:
      - git pull origin main
      - task: update
  update:
    cmds:
      - task: init
      - task: completions
      - task: sheldon
      - task: brew
  completions:
    cmds:
      - ./scripts/completion.zsh
    sources:
      - ./scripts/completion.zsh
    generates:
      - "$XDG_DATA_HOME/zsh/completions/*"
  sheldon:
    cmds:
      - sheldon lock --reinstall
    sources:
      - ./.config/zsh/plugins/defer/*
      - ./.config/zsh/plugins/sync/*
  brew:
    cmds:
      - brew bundle --file=./.config/Brewfile
    sources:
      - ./.config/Brewfile
